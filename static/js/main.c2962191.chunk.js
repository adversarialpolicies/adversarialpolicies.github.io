(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e){e.exports=[{name:"Overview",videos:[["You Shall Not Pass","Adversary (Adv1)","Zoo1"],["You Shall Not Pass","Normal (Zoo1)","Zoo1"],["Kick and Defend","Adversary (Adv1)","Zoo1"],["Kick and Defend","Normal (Zoo1)","Zoo1"],["Sumo Humans","Adversary (Adv1)","Zoo1"],["Sumo Humans","Normal (Zoo1)","Zoo1"]]},{name:"You Shall Not Pass - All Videos",videos:[["You Shall Not Pass","Adversary (Adv1)","Zoo1"],["You Shall Not Pass","Normal (Zoo1)","Zoo1"],["You Shall Not Pass","Random (Rand)","Zoo1"],["You Shall Not Pass","Lifeless (Zero)","Zoo1"]]},{name:"Kick and Defend - All Types",videos:[["Kick and Defend","Adversary (Adv1)","Zoo1"],["Kick and Defend","Normal (Zoo1)","Zoo1"],["Kick and Defend","Random (Rand)","Zoo1"],["Kick and Defend","Lifeless (Zero)","Zoo1"]]},{name:"Kick and Defend - All Adversaries",videos:[["Kick and Defend","Adversary (Adv1)","Zoo1"],["Kick and Defend","Adversary (Adv2)","Zoo2"],["Kick and Defend","Adversary (Adv3)","Zoo3"]]},{name:"Sumo Humans - All Types",videos:[["Sumo Humans","Adversary (Adv1)","Zoo1"],["Sumo Humans","Normal (Zoo1)","Zoo1"],["Sumo Humans","Random (Rand)","Zoo1"],["Sumo Humans","Lifeless (Zero)","Zoo1"]]},{name:"Sumo Humans - All Adversaries",videos:[["Sumo Humans","Adversary (Adv1)","Zoo1"],["Sumo Humans","Adversary (Adv2)","Zoo2"],["Sumo Humans","Adversary (Adv3)","Zoo3"]]},{name:"Sumo Ants - All Types",videos:[["Sumo Ants","Adversary (Adv1)","Zoo1"],["Sumo Ants","Normal (Zoo1)","Zoo1"],["Sumo Ants","Random (Rand)","Zoo1"],["Sumo Ants","Lifeless (Zero)","Zoo1"]]},{name:"Sumo Ants - All Adversaries",videos:[["Sumo Ants","Adversary (Adv1)","Zoo1"],["Sumo Ants","Adversary (Adv2)","Zoo2"],["Sumo Ants","Adversary (Adv3)","Zoo3"],["Sumo Ants","Adversary (Adv3)","Zoo4"]]}]},21:function(e){e.exports={"Kick and Defend":{"Adversary (Adv1)":{Zoo1:"KickAndDefend-v0_victim_zoo_1_opponent_ppo2_1",Zoo2:"KickAndDefend-v0_victim_zoo_2_opponent_ppo2_1",Zoo3:"KickAndDefend-v0_victim_zoo_3_opponent_ppo2_1"},"Adversary (Adv2)":{Zoo1:"KickAndDefend-v0_victim_zoo_1_opponent_ppo2_2",Zoo2:"KickAndDefend-v0_victim_zoo_2_opponent_ppo2_2",Zoo3:"KickAndDefend-v0_victim_zoo_3_opponent_ppo2_2"},"Adversary (Adv3)":{Zoo1:"KickAndDefend-v0_victim_zoo_1_opponent_ppo2_3",Zoo2:"KickAndDefend-v0_victim_zoo_2_opponent_ppo2_3",Zoo3:"KickAndDefend-v0_victim_zoo_3_opponent_ppo2_3"},"Random (Rand)":{Zoo1:"KickAndDefend-v0_victim_zoo_1_opponent_random_none",Zoo2:"KickAndDefend-v0_victim_zoo_2_opponent_random_none",Zoo3:"KickAndDefend-v0_victim_zoo_3_opponent_random_none"},"Lifeless (Zero)":{Zoo1:"KickAndDefend-v0_victim_zoo_1_opponent_zero_none",Zoo2:"KickAndDefend-v0_victim_zoo_2_opponent_zero_none",Zoo3:"KickAndDefend-v0_victim_zoo_3_opponent_zero_none"},"Normal (Zoo1)":{Zoo1:"KickAndDefend-v0_victim_zoo_1_opponent_zoo_1",Zoo2:"KickAndDefend-v0_victim_zoo_2_opponent_zoo_1",Zoo3:"KickAndDefend-v0_victim_zoo_3_opponent_zoo_1"},"Normal (Zoo2)":{Zoo1:"KickAndDefend-v0_victim_zoo_1_opponent_zoo_2",Zoo2:"KickAndDefend-v0_victim_zoo_2_opponent_zoo_2",Zoo3:"KickAndDefend-v0_victim_zoo_3_opponent_zoo_2"},"Normal (Zoo3)":{Zoo1:"KickAndDefend-v0_victim_zoo_1_opponent_zoo_3",Zoo2:"KickAndDefend-v0_victim_zoo_2_opponent_zoo_3",Zoo3:"KickAndDefend-v0_victim_zoo_3_opponent_zoo_3"}},"Sumo Ants":{"Adversary (Adv1)":{Zoo1:"SumoAnts-v0_victim_zoo_1_opponent_ppo2_1",Zoo2:"SumoAnts-v0_victim_zoo_2_opponent_ppo2_1",Zoo3:"SumoAnts-v0_victim_zoo_3_opponent_ppo2_1",Zoo4:"SumoAnts-v0_victim_zoo_4_opponent_ppo2_1"},"Adversary (Adv2)":{Zoo1:"SumoAnts-v0_victim_zoo_1_opponent_ppo2_2",Zoo2:"SumoAnts-v0_victim_zoo_2_opponent_ppo2_2",Zoo3:"SumoAnts-v0_victim_zoo_3_opponent_ppo2_2",Zoo4:"SumoAnts-v0_victim_zoo_4_opponent_ppo2_2"},"Adversary (Adv3)":{Zoo1:"SumoAnts-v0_victim_zoo_1_opponent_ppo2_3",Zoo2:"SumoAnts-v0_victim_zoo_2_opponent_ppo2_3",Zoo3:"SumoAnts-v0_victim_zoo_3_opponent_ppo2_3",Zoo4:"SumoAnts-v0_victim_zoo_4_opponent_ppo2_3"},"Adversary (Adv4)":{Zoo1:"SumoAnts-v0_victim_zoo_1_opponent_ppo2_4",Zoo2:"SumoAnts-v0_victim_zoo_2_opponent_ppo2_4",Zoo3:"SumoAnts-v0_victim_zoo_3_opponent_ppo2_4",Zoo4:"SumoAnts-v0_victim_zoo_4_opponent_ppo2_4"},"Random (Rand)":{Zoo1:"SumoAnts-v0_victim_zoo_1_opponent_random_none",Zoo2:"SumoAnts-v0_victim_zoo_2_opponent_random_none",Zoo3:"SumoAnts-v0_victim_zoo_3_opponent_random_none",Zoo4:"SumoAnts-v0_victim_zoo_4_opponent_random_none"},"Lifeless (Zero)":{Zoo1:"SumoAnts-v0_victim_zoo_1_opponent_zero_none",Zoo2:"SumoAnts-v0_victim_zoo_2_opponent_zero_none",Zoo3:"SumoAnts-v0_victim_zoo_3_opponent_zero_none",Zoo4:"SumoAnts-v0_victim_zoo_4_opponent_zero_none"},"Normal (Zoo1)":{Zoo1:"SumoAnts-v0_victim_zoo_1_opponent_zoo_1",Zoo2:"SumoAnts-v0_victim_zoo_2_opponent_zoo_1",Zoo3:"SumoAnts-v0_victim_zoo_3_opponent_zoo_1",Zoo4:"SumoAnts-v0_victim_zoo_4_opponent_zoo_1"},"Normal (Zoo2)":{Zoo1:"SumoAnts-v0_victim_zoo_1_opponent_zoo_2",Zoo2:"SumoAnts-v0_victim_zoo_2_opponent_zoo_2",Zoo3:"SumoAnts-v0_victim_zoo_3_opponent_zoo_2",Zoo4:"SumoAnts-v0_victim_zoo_4_opponent_zoo_2"},"Normal (Zoo3)":{Zoo1:"SumoAnts-v0_victim_zoo_1_opponent_zoo_3",Zoo2:"SumoAnts-v0_victim_zoo_2_opponent_zoo_3",Zoo3:"SumoAnts-v0_victim_zoo_3_opponent_zoo_3",Zoo4:"SumoAnts-v0_victim_zoo_4_opponent_zoo_3"},"Normal (Zoo4)":{Zoo1:"SumoAnts-v0_victim_zoo_1_opponent_zoo_4",Zoo2:"SumoAnts-v0_victim_zoo_2_opponent_zoo_4",Zoo3:"SumoAnts-v0_victim_zoo_3_opponent_zoo_4",Zoo4:"SumoAnts-v0_victim_zoo_4_opponent_zoo_4"}},"Sumo Humans":{"Adversary (Adv1)":{Zoo1:"SumoHumans-v0_victim_zoo_1_opponent_ppo2_1",Zoo2:"SumoHumans-v0_victim_zoo_2_opponent_ppo2_1",Zoo3:"SumoHumans-v0_victim_zoo_3_opponent_ppo2_1"},"Adversary (Adv2)":{Zoo1:"SumoHumans-v0_victim_zoo_1_opponent_ppo2_2",Zoo2:"SumoHumans-v0_victim_zoo_2_opponent_ppo2_2",Zoo3:"SumoHumans-v0_victim_zoo_3_opponent_ppo2_2"},"Adversary (Adv3)":{Zoo1:"SumoHumans-v0_victim_zoo_1_opponent_ppo2_3",Zoo2:"SumoHumans-v0_victim_zoo_2_opponent_ppo2_3",Zoo3:"SumoHumans-v0_victim_zoo_3_opponent_ppo2_3"},"Random (Rand)":{Zoo1:"SumoHumans-v0_victim_zoo_1_opponent_random_none",Zoo2:"SumoHumans-v0_victim_zoo_2_opponent_random_none",Zoo3:"SumoHumans-v0_victim_zoo_3_opponent_random_none"},"Lifeless (Zero)":{Zoo1:"SumoHumans-v0_victim_zoo_1_opponent_zero_none",Zoo2:"SumoHumans-v0_victim_zoo_2_opponent_zero_none",Zoo3:"SumoHumans-v0_victim_zoo_3_opponent_zero_none"},"Normal (Zoo1)":{Zoo1:"SumoHumans-v0_victim_zoo_1_opponent_zoo_1",Zoo2:"SumoHumans-v0_victim_zoo_2_opponent_zoo_1",Zoo3:"SumoHumans-v0_victim_zoo_3_opponent_zoo_1"},"Normal (Zoo2)":{Zoo1:"SumoHumans-v0_victim_zoo_1_opponent_zoo_2",Zoo2:"SumoHumans-v0_victim_zoo_2_opponent_zoo_2",Zoo3:"SumoHumans-v0_victim_zoo_3_opponent_zoo_2"},"Normal (Zoo3)":{Zoo1:"SumoHumans-v0_victim_zoo_1_opponent_zoo_3",Zoo2:"SumoHumans-v0_victim_zoo_2_opponent_zoo_3",Zoo3:"SumoHumans-v0_victim_zoo_3_opponent_zoo_3"}},"You Shall Not Pass":{"Adversary (Adv1)":{Zoo1:"YouShallNotPassHumans-v0_victim_zoo_1_opponent_ppo2_1"},"Random (Rand)":{Zoo1:"YouShallNotPassHumans-v0_victim_zoo_1_opponent_random_none"},"Lifeless (Zero)":{Zoo1:"YouShallNotPassHumans-v0_victim_zoo_1_opponent_zero_none"},"Normal (Zoo1)":{Zoo1:"YouShallNotPassHumans-v0_victim_zoo_1_opponent_zoo_1"}}}},25:function(e,o,t){e.exports=t(52)},36:function(e,o,t){},37:function(e,o,t){},38:function(e,o,t){},41:function(e,o,t){},42:function(e,o,t){},51:function(e,o,t){},52:function(e,o,t){"use strict";t.r(o);var n=t(0),a=t.n(n),i=t(14),s=t.n(i),c=(t(30),t(11)),r=t(18),l=t(4),m=(t(36),t(37),function(){return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-sm-2"},a.a.createElement("ul",{className:"nav flex-sm-column"},a.a.createElement("li",{className:"nav-item"},a.a.createElement("a",{className:"nav-link active",href:"#abstract"},"Abstract")),a.a.createElement("li",{className:"nav-item"},a.a.createElement("a",{className:"nav-link",href:"#videos"},"Explore Videos")))),a.a.createElement("div",{className:"col-sm-10"},a.a.createElement("section",{className:"contentSection"},a.a.createElement("h2",{id:"abstract"},"Abstract"),a.a.createElement("p",{className:"lead"},"Deep reinforcement learning (RL) policies are known to be vulnerable to adversarial perturbations to their observations, similar to adversarial examples for classifiers. However, an attacker is not usually able to directly modify observations. This might lead one to wonder: is it possible to attack an RL agent simply by choosing an adversarial policy acting in a shared environment so as to create natural observations that are adversarial? We demonstrate the existence of adversarial policies in zero-sum simulated robotics games, against state-of-the-art victims trained via self-play to be robust to adversaries. The adversarial policies reliably win against the victims despite not playing the game: they fall to the ground, and look similar to a random policy. We find our attack is more successful in high-dimensional environments, and induces activations in the victim that are extremely unlikely to occur when playing a normal opponent.")))))}),_=(t(38),function(){return a.a.createElement("footer",{className:"container-fluid"})}),d=t(3),v=(t(41),function(){return a.a.createElement("header",{className:"container-fluid"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col"},a.a.createElement("h1",null,"Adversarial Policies"),a.a.createElement("p",null,a.a.createElement("a",{href:"https://github.com/HumanCompatibleAI/adversarial-policies",className:"download-link"},a.a.createElement(d.a,{icon:["fab","github"]}),"GitHub"),"\xa0",a.a.createElement("a",{href:"TBC",className:"download-link"},a.a.createElement(d.a,{icon:"file"}),"Paper")))))}),p=t(24),u=t(12),h=t(19),f=t(23),b=t(5),A=t(6),z=t(8),Z=t(7),S=t(2),k=t(9),y=(t(42),function(e){function o(e){var t;return Object(b.a)(this,o),(t=Object(z.a)(this,Object(Z.a)(o).call(this,e))).elem=null,t.state={childWidth:null},t.getElemRef=t.getElemRef.bind(Object(S.a)(t)),t}return Object(k.a)(o,e),Object(A.a)(o,[{key:"render",value:function(){var e={};return this.state.childWidth&&(e.width="".concat(this.state.childWidth-16,"px")),a.a.createElement("div",{className:"VideoContainer",ref:this.getElemRef},a.a.Children.map(this.props.children,function(o){return a.a.createElement("div",{className:"Video",style:e},o)}))}},{key:"componentDidUpdate",value:function(){this.recalculateChildSizes()}},{key:"getElemRef",value:function(e){this.elem=e,this.recalculateChildSizes()}},{key:"recalculateChildSizes",value:function(){var e=this.getDesiredChildWidth();e!==this.state.childWidth&&this.setState({childWidth:e})}},{key:"getDesiredChildWidth",value:function(){if(!this.elem)return null;var e,o=this.elem.getBoundingClientRect().width,t=a.a.Children.count(this.props.children);do{if(0===t)return 480;e=o/t,--t}while(e<480);return e}}]),o}(a.a.Component)),E="https://adversarial-policies-public.s3.amazonaws.com/videos/",N=function(e){function o(e){var t;return Object(b.a)(this,o),(t=Object(z.a)(this,Object(Z.a)(o).call(this,e))).videoElem=null,t.state={synchronized:!0},t.getVideoElemRef=t.getVideoElemRef.bind(Object(S.a)(t)),t.videoDataLoaded=t.videoDataLoaded.bind(Object(S.a)(t)),t.onVideoRemove=t.onVideoRemove.bind(Object(S.a)(t)),t.onLockToSynchronization=t.onLockToSynchronization.bind(Object(S.a)(t)),t.onUnlockFromSynchronization=t.onUnlockFromSynchronization.bind(Object(S.a)(t)),t}return Object(k.a)(o,e),Object(A.a)(o,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",{className:"h5 Video__title"},a.a.createElement("span",{className:"Video__title-content"},this.props.name),a.a.createElement("div",{className:"btn-group float-right"},this.state.synchronized?a.a.createElement("button",{className:"btn btn-outline-primary","aria-label":"Enable video controls",title:"Enable video controls",onClick:this.onUnlockFromSynchronization},a.a.createElement(d.a,{icon:"lock"})):a.a.createElement("button",{className:"btn btn-outline-primary","aria-label":"Synchronize video to global playback",title:"Synchronize video to global playback",onClick:this.onLockToSynchronization},a.a.createElement(d.a,{icon:"unlock"})),a.a.createElement("a",{href:"".concat(E).concat(this.props.videoFile).concat("_1080p.mp4"),target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline-secondary",title:"Open video in new tab","aria-label":"Open video in new tab"},a.a.createElement(d.a,{icon:"external-link-alt"})),a.a.createElement("button",{className:"btn btn-outline-danger",title:"Remove video","aria-label":"Remove video",onClick:this.onVideoRemove},a.a.createElement(d.a,{icon:"window-close"})))),a.a.createElement("div",{className:"embed-responsive embed-responsive-16by9"},a.a.createElement("video",{src:"".concat(E).concat(this.props.videoFile).concat("_720p.mp4"),ref:this.getVideoElemRef,muted:!0,controls:!this.state.synchronized})))}},{key:"componentDidUpdate",value:function(){this.updateElemState()}},{key:"componentWillUnmount",value:function(){this.videoElem&&this.videoElem.removeEventListener("loadeddata",this.videoDataLoaded)}},{key:"getVideoElemRef",value:function(e){this.videoElem=e,e&&(e.addEventListener("loadeddata",this.videoDataLoaded),this.updateElemState())}},{key:"videoDataLoaded",value:function(){this.videoElem&&this.props.onVideoDurationKnown(this.videoElem.duration)}},{key:"onLockToSynchronization",value:function(){this.setState({synchronized:!0})}},{key:"onUnlockFromSynchronization",value:function(){this.setState({synchronized:!1})}},{key:"onVideoRemove",value:function(){this.props.onVideoRemove()}},{key:"updateElemState",value:function(){if(this.videoElem&&!(this.videoElem.readyState<2)&&this.state.synchronized){var e=Math.abs(this.videoElem.currentTime-this.props.position);this.props.position>this.videoElem.duration?this.videoElem.currentTime=this.videoElem.duration:e>.2&&(this.videoElem.currentTime=this.props.position),this.videoElem.paused&&this.videoElem.play()}}}]),o}(a.a.Component),g=t(20),O=t(21),L=g,w=O;function D(e){return w[e[0]][e[1]][e[2]]}var V=t(22),R=t.n(V),j=(t(51),function(e){function o(e){var t;return Object(b.a)(this,o),(t=Object(z.a)(this,Object(Z.a)(o).call(this,e))).openVideoPicker=t.openVideoPicker.bind(Object(S.a)(t)),t.onPickerCancel=t.onPickerCancel.bind(Object(S.a)(t)),t.onLoadPreset=t.onLoadPreset.bind(Object(S.a)(t)),t.onRestartVideos=t.onRestartVideos.bind(Object(S.a)(t)),t.state={pickerOpen:!1,selectedEnvironment:null,selectedAdversary:null},t}return Object(k.a)(o,e),Object(A.a)(o,[{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Comparison controls"},this.state.pickerOpen||a.a.createElement("button",{className:"btn btn-primary",onClick:this.openVideoPicker},a.a.createElement(d.a,{icon:"plus"})," Add"),a.a.createElement("div",{className:"btn-group"},a.a.createElement("button",{className:"btn btn-primary dropdown-toggle",id:"load-preset-button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Load Preset"),a.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"load-preset-button"},L.map(function(o){var t=o.name,n=o.videos;return a.a.createElement("button",{key:t,className:"dropdown-item",onClick:e.onLoadPreset.bind(e,n)},t)}))),a.a.createElement("button",{className:"btn btn-secondary",onClick:this.onRestartVideos},a.a.createElement(d.a,{icon:"fast-backward"})," Restart"),a.a.createElement("button",{className:"btn btn-danger",onClick:this.onLoadPreset.bind(this,[])},a.a.createElement(d.a,{icon:"ban"})," Clear")),a.a.createElement(R.a,{isOpen:this.state.pickerOpen,contentLabel:"Select video to add to comparison",shouldCloseOnOverlayClick:!1},a.a.createElement("button",{className:"btn btn-secondary VideoPicker__close",onClick:this.onPickerCancel,"aria-label":"Close picker"},a.a.createElement(d.a,{icon:"window-close"})),a.a.createElement("div",{className:"container-fluid"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-4"},a.a.createElement("h2",{className:"text-center"},"Environment")),a.a.createElement("div",{className:"col-4"},a.a.createElement("h2",{className:"text-center"},"Opponent")),a.a.createElement("div",{className:"col-4"},a.a.createElement("h2",{className:"text-center"},"Victim"))),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-4"},a.a.createElement("ul",{className:"list-group"},Object.keys(w).map(function(o){return a.a.createElement("li",{key:o,className:"list-group-item ".concat(o===e.state.selectedEnvironment?"active":"")},a.a.createElement("button",{className:"btn btn-block",onClick:e.onSelectEnvironment.bind(e,o)},o))}))),null!==this.state.selectedEnvironment&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"col-4"},a.a.createElement("ul",{className:"list-group"},Object.keys(w[this.state.selectedEnvironment]).map(function(o){return a.a.createElement("li",{key:o,className:"list-group-item ".concat(o===e.state.selectedAdversary?"active":"")},a.a.createElement("button",{className:"btn btn-block",onClick:e.onSelectAdversary.bind(e,o)},o))}))),null!==this.state.selectedAdversary&&a.a.createElement("div",{className:"col-4"},a.a.createElement("ul",{className:"list-group"},Object.keys(w[this.state.selectedEnvironment][this.state.selectedAdversary]).map(function(o){return a.a.createElement("li",{key:o,className:"list-group-item"},a.a.createElement("button",{className:"btn btn-block",onClick:e.onPick.bind(e,[e.state.selectedEnvironment,e.state.selectedAdversary,o]),disabled:P([e.state.selectedEnvironment,e.state.selectedAdversary,o],e.props.alreadyPickedVideos)},o))}))))))))}},{key:"openVideoPicker",value:function(){this.setState({pickerOpen:!0})}},{key:"onPickerCancel",value:function(){this.setState({pickerOpen:!1})}},{key:"onPick",value:function(e){this.setState({pickerOpen:!1}),this.props.onAddVideo(e)}},{key:"onLoadPreset",value:function(e){this.props.onLoadPreset(e)}},{key:"onRestartVideos",value:function(){this.props.onRestartVideos()}},{key:"onSelectEnvironment",value:function(e){this.setState({selectedEnvironment:e,selectedAdversary:null})}},{key:"onSelectAdversary",value:function(e){this.setState({selectedAdversary:e})}}]),o}(a.a.Component));function P(e,o){return o.map(function(e){return JSON.stringify(e)}).indexOf(JSON.stringify(e))>-1}var H=function(e){function o(e){var t;return Object(b.a)(this,o),(t=Object(z.a)(this,Object(Z.a)(o).call(this,e))).state={videos:L[0].videos,videoLengths:{},videoPosition:0,lastLoopStarted:window.performance.now()},t.onAddVideo=t.onAddVideo.bind(Object(S.a)(t)),t.onLoadPreset=t.onLoadPreset.bind(Object(S.a)(t)),t.onRestartVideos=t.onRestartVideos.bind(Object(S.a)(t)),t.tick=t.tick.bind(Object(S.a)(t)),t}return Object(k.a)(o,e),Object(A.a)(o,[{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col offset-sm-2"},a.a.createElement("h2",{id:"videos"},"Explore Videos")),a.a.createElement("div",{className:"col col-auto"},a.a.createElement(j,{onAddVideo:this.onAddVideo,onLoadPreset:this.onLoadPreset,alreadyPickedVideos:this.state.videos,onRestartVideos:this.onRestartVideos}))),a.a.createElement("div",{className:"row"},a.a.createElement("p",null,'Use "Load Preset" to compare videos from the same environment. Use the "Add" button to explore beyond the presets. By default, the videos are synchronized. Click the lock icon to unlock the playback controls.'))),a.a.createElement(y,null,this.state.videos.map(function(o){return a.a.createElement(N,{key:JSON.stringify(o),name:"".concat(o[0],": ").concat(o[1]," vs ").concat(o[2]),videoFile:D(o),position:e.state.videoPosition/1e3,onVideoDurationKnown:e.onVideoDurationKnown.bind(e,D(o)),onVideoRemove:e.onRemoveVideo.bind(e,o)})})))}},{key:"componentDidMount",value:function(){setInterval(this.tick,80)}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.updateInterval)}},{key:"onLoadPreset",value:function(e){var o=this,t=e.map(function(e){return D(e)}),n={};Object.entries(this.state.videoLengths).forEach(function(e){var a=Object(f.a)(e,2),i=a[0];a[1];t.indexOf(i)>-1&&(n[i]=o.state.videoLengths[i])}),this.setState({videos:e,videoLengths:n,videoPosition:0,lastLoopStarted:window.performance.now()})}},{key:"onAddVideo",value:function(e){var o=this.state.videos.slice();o.push(e),this.setState({videos:o})}},{key:"onRemoveVideo",value:function(e){var o=this.state,t=o.videos,n=o.videoLengths;delete n[D(e)],this.setState({videos:t.filter(function(o){return JSON.stringify(o)!==JSON.stringify(e)}),videoLengths:n})}},{key:"onVideoDurationKnown",value:function(e,o){this.setState({videoLengths:Object(h.a)({},this.state.videoLengths,Object(u.a)({},e,1e3*o))})}},{key:"onRestartVideos",value:function(){Object.values(this.state.videoLengths).length>0&&this.setState({videoPosition:0,lastLoopStarted:window.performance.now()})}},{key:"getMaxVideoLength",value:function(){return 0===Object.values(this.state.videoLengths).length?-1:Math.max.apply(Math,Object(p.a)(Object.values(this.state.videoLengths)))}},{key:"tick",value:function(){var e=window.performance.now(),o=e-this.state.lastLoopStarted;o>this.getMaxVideoLength()?this.setState({videoPosition:0,lastLoopStarted:e}):this.setState({videoPosition:o})}}]),o}(a.a.Component),K=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(v,null),a.a.createElement(m,null),a.a.createElement(H,null),a.a.createElement(_,null))};c.b.add(l.a,l.b,l.c,l.d,r.a,l.e,l.f,l.g,l.h,l.i,l.j),s.a.render(a.a.createElement(K,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.c2962191.chunk.js.map